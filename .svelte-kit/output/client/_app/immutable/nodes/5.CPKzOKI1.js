import{s as Le,n as Re,r as Ke,c as Ve,o as Xe,e as Ze}from"../chunks/H_iquXZA.js";import{S as We,i as Fe,d as c,a as le,b as t,q as v,c as f,e as d,g as w,h as p,j as D,s as T,f as g,t as k,p as Ce,k as $e,l as xe,m as et,o as tt,r as nt,u as st,v as at,w as lt}from"../chunks/74oKnm7Q.js";import{p as ot}from"../chunks/Crxm-zH5.js";import{s as rt}from"../chunks/C_QjJRU1.js";import{g as it}from"../chunks/DvhzlPJ8.js";import{$ as ct}from"../chunks/DVuTZ6Zw.js";const ut=!1,wt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ut},Symbol.toStringTag,{value:"Module"}));function ft(a){let n,s,r=a[0].name+"",l;return{c(){n=p("p"),s=k("Connected to: "),l=k(r)},l(o){n=f(o,"P",{});var e=d(n);s=g(e,"Connected to: "),l=g(e,r),e.forEach(c)},m(o,e){le(o,n,e),t(n,s),t(n,l)},p(o,e){e&1&&r!==(r=o[0].name+"")&&T(l,r)},d(o){o&&c(n)}}}function pt(a){let n,s=a[1]?"Connecting...":"Connect to Printer",r,l,o;return{c(){n=p("button"),r=k(s),this.h()},l(e){n=f(e,"BUTTON",{});var i=d(n);r=g(i,s),i.forEach(c),this.h()},h(){n.disabled=a[1]},m(e,i){le(e,n,i),t(n,r),l||(o=Ce(n,"click",a[3]),l=!0)},p(e,i){i&2&&s!==(s=e[1]?"Connecting...":"Connect to Printer")&&T(r,s),i&2&&(n.disabled=e[1])},d(e){e&&c(n),l=!1,o()}}}function Ue(a){let n,s;return{c(){n=p("p"),s=k(a[2]),this.h()},l(r){n=f(r,"P",{class:!0});var l=d(n);s=g(l,a[2]),l.forEach(c),this.h()},h(){v(n,"class","status svelte-1o7miz8")},m(r,l){le(r,n,l),t(n,s)},p(r,l){l&4&&T(s,r[2])},d(r){r&&c(n)}}}function vt(a){let n,s;function r(i,h){return i[0]?ft:pt}let l=r(a),o=l(a),e=a[2]&&Ue(a);return{c(){n=p("div"),o.c(),s=D(),e&&e.c(),this.h()},l(i){n=f(i,"DIV",{class:!0});var h=d(n);o.l(h),s=w(h),e&&e.l(h),h.forEach(c),this.h()},h(){v(n,"class","bluetooth-printer svelte-1o7miz8")},m(i,h){le(i,n,h),o.m(n,null),t(n,s),e&&e.m(n,null)},p(i,[h]){l===(l=r(i))&&o?o.p(i,h):(o.d(1),o=l(i),o&&(o.c(),o.m(n,s))),i[2]?e?e.p(i,h):(e=Ue(i),e.c(),e.m(n,null)):e&&(e.d(1),e=null)},i:Re,o:Re,d(i){i&&c(n),o.d(),e&&e.d()}}}function dt(a,n,s){let r,l,o=!1,e="";async function i(){if(!navigator.bluetooth){s(2,e="Web Bluetooth API is not available in this browser.");return}try{s(1,o=!0),s(2,e="Requesting Bluetooth device..."),s(0,r=await navigator.bluetooth.requestDevice({acceptAllDevices:!0})),s(2,e=`Connecting to ${r.name}...`);const P=await r.gatt.connect();s(2,e="Getting service...");const E=await P.getPrimaryServices();if(E.length>0){const b=E[0];s(2,e="Getting characteristic...");const m=await b.getCharacteristics();m.length>0?(l=m[0],s(2,e=`Connected to ${r.name}. Ready to print.`)):s(2,e="No characteristics found for this service.")}else s(2,e="No services found for this device.")}catch(P){s(2,e=`Error: ${P.message}`)}finally{s(1,o=!1)}}async function h(P){if(!l){s(2,e="Not connected to a printer.");return}try{const b=new TextEncoder().encode(P+`


`);s(2,e="Print command sent.")}catch(E){s(2,e=`Print error: ${E.message}`)}}return[r,o,e,i,h]}class ht extends We{constructor(n){super(),Fe(this,n,dt,vt,Le,{print:4})}get print(){return this.$$.ctx[4]}}function Ye(a){let n,s,r,l=a[5]("tokenPage.section")+"",o,e,i,h=a[0].name+"",P,E,b,m,I=a[5]("tokenPage.type")+"",A,B,Q,u=(a[0].type==="clinic"?a[5]("tokenPage.clinic"):a[5]("tokenPage.laboratory"))+"",H,K,j,F,R=a[5]("tokenPage.feePaid")+"",X,oe,z,O=a[0].price+"",U,ee,Z=a[5]("currency")+"",Y;return{c(){n=p("div"),s=p("div"),r=p("span"),o=k(l),e=D(),i=p("span"),P=k(h),E=D(),b=p("div"),m=p("span"),A=k(I),B=D(),Q=p("span"),H=k(u),K=D(),j=p("div"),F=p("span"),X=k(R),oe=D(),z=p("span"),U=k(O),ee=D(),Y=k(Z),this.h()},l(y){n=f(y,"DIV",{class:!0});var N=d(n);s=f(N,"DIV",{class:!0});var $=d(s);r=f($,"SPAN",{class:!0});var G=d(r);o=g(G,l),G.forEach(c),e=w($),i=f($,"SPAN",{class:!0});var L=d(i);P=g(L,h),L.forEach(c),$.forEach(c),E=w(N),b=f(N,"DIV",{class:!0});var te=d(b);m=f(te,"SPAN",{class:!0});var ne=d(m);A=g(ne,I),ne.forEach(c),B=w(te),Q=f(te,"SPAN",{class:!0});var re=d(Q);H=g(re,u),re.forEach(c),te.forEach(c),K=w(N),j=f(N,"DIV",{class:!0});var se=d(j);F=f(se,"SPAN",{class:!0});var W=d(F);X=g(W,R),W.forEach(c),oe=w(se),z=f(se,"SPAN",{class:!0});var ae=d(z);U=g(ae,O),ee=w(ae),Y=g(ae,Z),ae.forEach(c),se.forEach(c),N.forEach(c),this.h()},h(){v(r,"class","info-label svelte-1n0r4ab"),v(i,"class","info-value svelte-1n0r4ab"),v(s,"class","info-row svelte-1n0r4ab"),v(m,"class","info-label svelte-1n0r4ab"),v(Q,"class","info-value svelte-1n0r4ab"),v(b,"class","info-row svelte-1n0r4ab"),v(F,"class","info-label svelte-1n0r4ab"),v(z,"class","info-value svelte-1n0r4ab"),v(j,"class","info-row svelte-1n0r4ab"),v(n,"class","section-info svelte-1n0r4ab")},m(y,N){le(y,n,N),t(n,s),t(s,r),t(r,o),t(s,e),t(s,i),t(i,P),t(n,E),t(n,b),t(b,m),t(m,A),t(b,B),t(b,Q),t(Q,H),t(n,K),t(n,j),t(j,F),t(F,X),t(j,oe),t(j,z),t(z,U),t(z,ee),t(z,Y)},p(y,N){N&32&&l!==(l=y[5]("tokenPage.section")+"")&&T(o,l),N&1&&h!==(h=y[0].name+"")&&T(P,h),N&32&&I!==(I=y[5]("tokenPage.type")+"")&&T(A,I),N&33&&u!==(u=(y[0].type==="clinic"?y[5]("tokenPage.clinic"):y[5]("tokenPage.laboratory"))+"")&&T(H,u),N&32&&R!==(R=y[5]("tokenPage.feePaid")+"")&&T(X,R),N&1&&O!==(O=y[0].price+"")&&T(U,O),N&32&&Z!==(Z=y[5]("currency")+"")&&T(Y,Z)},d(y){y&&c(n)}}}function Ge(a){let n,s,r=a[5]("queue.positionInQueue")+"",l,o,e,i=a[0].queue.findIndex(a[11])+1+"",h,P,E=a[0].queue.length+"",b;return{c(){n=p("div"),s=p("p"),l=k(r),o=D(),e=p("p"),h=k(i),P=k(" / "),b=k(E),this.h()},l(m){n=f(m,"DIV",{class:!0});var I=d(n);s=f(I,"P",{class:!0});var A=d(s);l=g(A,r),A.forEach(c),o=w(I),e=f(I,"P",{class:!0});var B=d(e);h=g(B,i),P=g(B," / "),b=g(B,E),B.forEach(c),I.forEach(c),this.h()},h(){v(s,"class","queue-label svelte-1n0r4ab"),v(e,"class","queue-number svelte-1n0r4ab"),v(n,"class","queue-position svelte-1n0r4ab")},m(m,I){le(m,n,I),t(n,s),t(s,l),t(n,o),t(n,e),t(e,h),t(e,P),t(e,b)},p(m,I){I&32&&r!==(r=m[5]("queue.positionInQueue")+"")&&T(l,r),I&3&&i!==(i=m[0].queue.findIndex(m[11])+1+"")&&T(h,i),I&1&&E!==(E=m[0].queue.length+"")&&T(b,E)},d(m){m&&c(n)}}}function _t(a){let n,s,r,l,o,e,i="ðŸ¥",h,P,E=a[5]("hospital.title")+"",b,m,I,A=a[5]("tokenPage.subtitle")+"",B,Q,u,H,K=a[5]("tokenPage.yourTokenNumber")+"",j,F,R,X,oe,z,O,U,ee,Z,Y,y,N,$,G,L,te,ne=a[5]("tokenPage.printToken")+"",re,se,W,ae,pe=a[5]("tokenPage.backToHome")+"",he,Ie,ie,x,we,ce,J,ve=a[5]("tokenPage.thankYouMessage")+"",_e,De,be,Te,de=a[5]("hospital.title")+"",me,M,ye,Se;document.title=n=a[5]("tokenPage.yourTokenNumber")+" #"+a[1]+" - "+a[5]("hospital.title");let V=a[0]&&Ye(a),C=a[0]&&Ge(a),Je={};return x=new ht({props:Je}),a[12](x),{c(){s=D(),r=p("div"),l=p("div"),o=p("div"),e=p("div"),e.textContent=i,h=D(),P=p("h1"),b=k(E),m=D(),I=p("p"),B=k(A),Q=D(),u=p("div"),H=p("p"),j=k(K),F=D(),R=p("div"),X=k(a[1]),oe=D(),V&&V.c(),z=D(),O=p("div"),U=p("p"),ee=k(a[2]),Z=D(),Y=p("p"),y=k(a[3]),N=D(),C&&C.c(),$=D(),G=p("div"),L=p("button"),te=k("ðŸ–¨ï¸ "),re=k(ne),se=D(),W=p("button"),ae=k("ðŸ  "),he=k(pe),Ie=D(),ie=p("div"),lt(x.$$.fragment),we=D(),ce=p("div"),J=p("p"),_e=k(ve),De=D(),be=p("br"),Te=D(),me=k(de),this.h()},l(_){nt("svelte-1swwec3",document.head).forEach(c),s=w(_),r=f(_,"DIV",{class:!0});var ge=d(r);l=f(ge,"DIV",{class:!0});var S=d(l);o=f(S,"DIV",{class:!0});var ue=d(o);e=f(ue,"DIV",{class:!0,"data-svelte-h":!0}),st(e)!=="svelte-17r3utu"&&(e.textContent=i),h=w(ue),P=f(ue,"H1",{class:!0});var Ae=d(P);b=g(Ae,E),Ae.forEach(c),m=w(ue),I=f(ue,"P",{class:!0});var Be=d(I);B=g(Be,A),Be.forEach(c),ue.forEach(c),Q=w(S),u=f(S,"DIV",{class:!0});var ke=d(u);H=f(ke,"P",{class:!0});var Me=d(H);j=g(Me,K),Me.forEach(c),F=w(ke),R=f(ke,"DIV",{class:!0});var Oe=d(R);X=g(Oe,a[1]),Oe.forEach(c),ke.forEach(c),oe=w(S),V&&V.l(S),z=w(S),O=f(S,"DIV",{class:!0});var Pe=d(O);U=f(Pe,"P",{class:!0});var He=d(U);ee=g(He,a[2]),He.forEach(c),Z=w(Pe),Y=f(Pe,"P",{class:!0});var je=d(Y);y=g(je,a[3]),je.forEach(c),Pe.forEach(c),N=w(S),C&&C.l(S),$=w(S),G=f(S,"DIV",{class:!0});var Ee=d(G);L=f(Ee,"BUTTON",{class:!0});var Ne=d(L);te=g(Ne,"ðŸ–¨ï¸ "),re=g(Ne,ne),Ne.forEach(c),se=w(Ee),W=f(Ee,"BUTTON",{class:!0});var qe=d(W);ae=g(qe,"ðŸ  "),he=g(qe,pe),qe.forEach(c),Ee.forEach(c),Ie=w(S),ie=f(S,"DIV",{class:!0});var ze=d(ie);at(x.$$.fragment,ze),ze.forEach(c),we=w(S),ce=f(S,"DIV",{class:!0});var Qe=d(ce);J=f(Qe,"P",{class:!0});var fe=d(J);_e=g(fe,ve),De=w(fe),be=f(fe,"BR",{class:!0}),Te=w(fe),me=g(fe,de),fe.forEach(c),Qe.forEach(c),S.forEach(c),ge.forEach(c),this.h()},h(){v(e,"class","hospital-logo svelte-1n0r4ab"),v(P,"class","svelte-1n0r4ab"),v(I,"class","subtitle svelte-1n0r4ab"),v(o,"class","print-header svelte-1n0r4ab"),v(H,"class","label svelte-1n0r4ab"),v(R,"class","token-number svelte-1n0r4ab"),v(u,"class","token-number-section svelte-1n0r4ab"),v(U,"class","date svelte-1n0r4ab"),v(Y,"class","time svelte-1n0r4ab"),v(O,"class","datetime-section svelte-1n0r4ab"),v(L,"class","print-btn svelte-1n0r4ab"),v(W,"class","home-btn svelte-1n0r4ab"),v(G,"class","actions no-print svelte-1n0r4ab"),v(ie,"class","no-print svelte-1n0r4ab"),v(be,"class","svelte-1n0r4ab"),v(J,"class","footer-main svelte-1n0r4ab"),v(ce,"class","token-footer svelte-1n0r4ab"),v(l,"class","token-card svelte-1n0r4ab"),v(r,"class","container svelte-1n0r4ab")},m(_,q){le(_,s,q),le(_,r,q),t(r,l),t(l,o),t(o,e),t(o,h),t(o,P),t(P,b),t(o,m),t(o,I),t(I,B),t(l,Q),t(l,u),t(u,H),t(H,j),t(u,F),t(u,R),t(R,X),t(l,oe),V&&V.m(l,null),t(l,z),t(l,O),t(O,U),t(U,ee),t(O,Z),t(O,Y),t(Y,y),t(l,N),C&&C.m(l,null),t(l,$),t(l,G),t(G,L),t(L,te),t(L,re),t(G,se),t(G,W),t(W,ae),t(W,he),t(l,Ie),t(l,ie),tt(x,ie,null),t(l,we),t(l,ce),t(ce,J),t(J,_e),t(J,De),t(J,be),t(J,Te),t(J,me),M=!0,ye||(Se=[Ce(L,"click",a[6]),Ce(W,"click",a[7])],ye=!0)},p(_,[q]){(!M||q&34)&&n!==(n=_[5]("tokenPage.yourTokenNumber")+" #"+_[1]+" - "+_[5]("hospital.title"))&&(document.title=n),(!M||q&32)&&E!==(E=_[5]("hospital.title")+"")&&T(b,E),(!M||q&32)&&A!==(A=_[5]("tokenPage.subtitle")+"")&&T(B,A),(!M||q&32)&&K!==(K=_[5]("tokenPage.yourTokenNumber")+"")&&T(j,K),(!M||q&2)&&T(X,_[1]),_[0]?V?V.p(_,q):(V=Ye(_),V.c(),V.m(l,z)):V&&(V.d(1),V=null),(!M||q&4)&&T(ee,_[2]),(!M||q&8)&&T(y,_[3]),_[0]?C?C.p(_,q):(C=Ge(_),C.c(),C.m(l,$)):C&&(C.d(1),C=null),(!M||q&32)&&ne!==(ne=_[5]("tokenPage.printToken")+"")&&T(re,ne),(!M||q&32)&&pe!==(pe=_[5]("tokenPage.backToHome")+"")&&T(he,pe);const ge={};x.$set(ge),(!M||q&32)&&ve!==(ve=_[5]("tokenPage.thankYouMessage")+"")&&T(_e,ve),(!M||q&32)&&de!==(de=_[5]("hospital.title")+"")&&T(me,de)},i(_){M||(et(x.$$.fragment,_),M=!0)},o(_){xe(x.$$.fragment,_),M=!1},d(_){_&&(c(s),c(r)),V&&V.d(),C&&C.d(),a[12](null),$e(x),ye=!1,Ke(Se)}}}function bt(a,n,s){let r,l,o,e,i,h;Ve(a,ct,u=>s(5,e=u)),Ve(a,rt,u=>s(9,i=u)),Ve(a,ot,u=>s(10,h=u));let P="",E="",b;Xe(()=>{m();const u=setInterval(m,1e3);return()=>clearInterval(u)});function m(){const u=new Date;s(2,P=u.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})),s(3,E=u.toLocaleTimeString(void 0))}async function I(){if(!(typeof window>"u"))if(b&&b.print){const u=`
${e("hospital.title")}
${e("tokenPage.subtitle")}

${e("tokenPage.yourTokenNumber")}: ${r}

${e("tokenPage.section")}: ${o.name}
${e("tokenPage.type")}: ${o.type==="clinic"?e("tokenPage.clinic"):e("tokenPage.laboratory")}
${e("tokenPage.feePaid")}: ${o.price} ${e("currency")}

${P}
${E}

${e("queue.positionInQueue")}: ${o.queue.findIndex(H=>H.number===r)+1} / ${o.queue.length}

${e("tokenPage.thankYouMessage")}
			`;await b.print(u)}else window.print&&window.print()}function A(){it("/")}const B=u=>u.number===r;function Q(u){Ze[u?"unshift":"push"](()=>{b=u,s(4,b)})}return a.$$.update=()=>{a.$$.dirty&1024&&s(1,r=parseInt(h.params.number)),a.$$.dirty&1024&&s(8,l=parseInt(h.url.searchParams.get("section")||"0")),a.$$.dirty&768&&s(0,o=i.find(u=>u.id===l)),a.$$.dirty&3&&(o==null||o.queue.find(u=>u.number===r))},[o,r,P,E,b,e,I,A,l,i,h,B,Q]}class Dt extends We{constructor(n){super(),Fe(this,n,bt,_t,Le,{})}}export{Dt as component,wt as universal};
