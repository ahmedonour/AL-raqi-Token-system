import{s as Le,n as Oe,r as He,c as Ee,o as Qe}from"../chunks/CBAgXpWv.js";import{S as Re,i as je,d as u,s as q,a as xe,b as e,p as Be,q as c,r as Ye,g as w,c as p,e as h,u as Ke,f as g,j as A,h as f,t as k}from"../chunks/B5JCov3p.js";import{p as Fe}from"../chunks/BCzKTjMx.js";import{s as We}from"../chunks/C1I1J8-N.js";import{g as Ge}from"../chunks/BkuUy9iu.js";import{$ as Je}from"../chunks/BdT7tXd5.js";const Xe=!1,ot=Object.freeze(Object.defineProperty({__proto__:null,prerender:Xe},Symbol.toStringTag,{value:"Module"}));class ye{constructor(){this._buffer=[]}static _concatBuffers(n){const i=n.reduce((o,r)=>o+r.length,0),l=new Uint8Array(i);let a=0;for(const o of n)l.set(o,a),a+=o.length;return l}_enqueue(n){this._buffer.push(n)}encode(){const n=ye._concatBuffers(this._buffer);return this._buffer=[],n}text(n=""){return this._enqueue(new TextEncoder().encode(n)),this}newline(n=1){return this._enqueue(new Uint8Array(new Array(n).fill(10))),this}alignLeft(){return this._enqueue(new Uint8Array([27,97,0])),this}alignCenter(){return this._enqueue(new Uint8Array([27,97,1])),this}alignRight(){return this._enqueue(new Uint8Array([27,97,2])),this}boldOn(){return this._enqueue(new Uint8Array([27,69,1])),this}boldOff(){return this._enqueue(new Uint8Array([27,69,0])),this}size(n=0){return this._enqueue(new Uint8Array([29,33,n])),this}cut(){return this._enqueue(new Uint8Array([29,86,0])),this}feed(n=1){return this._enqueue(new Uint8Array([27,100,n])),this}underline(n=0){return this._enqueue(new Uint8Array([27,45,n])),this}invert(n=!0){return this._enqueue(new Uint8Array([29,66,n?1:0])),this}emphasize(n=!0){return this._enqueue(new Uint8Array([27,69,n?1:0])),this}doubleStrike(n=!0){return this._enqueue(new Uint8Array([27,71,n?1:0])),this}setCharacterSet(n="PC437"){const l={PC437:0,KATAKANA:1,PC850:2,PC860:3,PC863:4,PC865:5,WPC1252:16,PC866:18,PC852:19,PC858:20}[n.toUpperCase()]||0;return this._enqueue(new Uint8Array([27,116,l])),this}printBarcode(n,i,l=50,a=2,o=0,r="left"){this._enqueue(new Uint8Array([29,72,o])),this._enqueue(new Uint8Array([29,119,a])),this._enqueue(new Uint8Array([29,104,l]));let _=0;r==="center"?_=1:r==="right"&&(_=2),this._enqueue(new Uint8Array([27,97,_]));let d;switch(i.toUpperCase()){case"UPC-A":d=0;break;case"UPC-E":d=1;break;case"EAN13":d=2;break;case"EAN8":d=3;break;case"CODE39":d=4;break;case"ITF":d=5;break;case"CODABAR":d=6;break;case"CODE93":d=73;break;case"CODE128":d=74;break;default:throw new Error("Unsupported barcode type")}const m=new TextEncoder().encode(n);return this._enqueue(new Uint8Array([29,107,d,m.length,...m])),this}printQRCode(n,i=3,l="M"){let a=49;switch(l.toUpperCase()){case"L":a=48;break;case"M":a=49;break;case"Q":a=50;break;case"H":a=51;break}const o=new TextEncoder().encode(n),r=o.length+3;return this._enqueue(new Uint8Array([29,40,107,4,0,49,65,50,0])),this._enqueue(new Uint8Array([29,40,107,3,0,49,67,i])),this._enqueue(new Uint8Array([29,40,107,3,0,49,69,a])),this._enqueue(new Uint8Array([29,40,107,r%256,Math.floor(r/256),49,80,48,...o])),this._enqueue(new Uint8Array([29,40,107,3,0,49,81,48])),this}}function Ze(s){let n="";const i=s.length;for(let l=0;l<i;l++)n+=String.fromCharCode(s[l]);return btoa(n)}function Me(s){let n,i,l,a=s[4]("tokenPage.section")+"",o,r,_,d=s[1].name+"",m,C,P,x,b=s[4]("tokenPage.type")+"",S,t,O,D=(s[1].type==="clinic"?s[4]("tokenPage.clinic"):s[4]("tokenPage.laboratory"))+"",L,W,B,K,z=s[4]("tokenPage.feePaid")+"",G,se,M,N=s[1].price+"",H,Z,J=s[4]("currency")+"",Q;return{c(){n=f("div"),i=f("div"),l=f("span"),o=k(a),r=A(),_=f("span"),m=k(d),C=A(),P=f("div"),x=f("span"),S=k(b),t=A(),O=f("span"),L=k(D),W=A(),B=f("div"),K=f("span"),G=k(z),se=A(),M=f("span"),H=k(N),Z=A(),Q=k(J),this.h()},l(E){n=p(E,"DIV",{class:!0});var y=h(n);i=p(y,"DIV",{class:!0});var X=h(i);l=p(X,"SPAN",{class:!0});var R=h(l);o=g(R,a),R.forEach(u),r=w(X),_=p(X,"SPAN",{class:!0});var j=h(_);m=g(j,d),j.forEach(u),X.forEach(u),C=w(y),P=p(y,"DIV",{class:!0});var $=h(P);x=p($,"SPAN",{class:!0});var ee=h(x);S=g(ee,b),ee.forEach(u),t=w($),O=p($,"SPAN",{class:!0});var ae=h(O);L=g(ae,D),ae.forEach(u),$.forEach(u),W=w(y),B=p(y,"DIV",{class:!0});var te=h(B);K=p(te,"SPAN",{class:!0});var Y=h(K);G=g(Y,z),Y.forEach(u),se=w(te),M=p(te,"SPAN",{class:!0});var ne=h(M);H=g(ne,N),Z=w(ne),Q=g(ne,J),ne.forEach(u),te.forEach(u),y.forEach(u),this.h()},h(){c(l,"class","info-label svelte-p7b1x8"),c(_,"class","info-value svelte-p7b1x8"),c(i,"class","info-row svelte-p7b1x8"),c(x,"class","info-label svelte-p7b1x8"),c(O,"class","info-value svelte-p7b1x8"),c(P,"class","info-row svelte-p7b1x8"),c(K,"class","info-label svelte-p7b1x8"),c(M,"class","info-value svelte-p7b1x8"),c(B,"class","info-row svelte-p7b1x8"),c(n,"class","section-info svelte-p7b1x8")},m(E,y){xe(E,n,y),e(n,i),e(i,l),e(l,o),e(i,r),e(i,_),e(_,m),e(n,C),e(n,P),e(P,x),e(x,S),e(P,t),e(P,O),e(O,L),e(n,W),e(n,B),e(B,K),e(K,G),e(B,se),e(B,M),e(M,H),e(M,Z),e(M,Q)},p(E,y){y&16&&a!==(a=E[4]("tokenPage.section")+"")&&q(o,a),y&2&&d!==(d=E[1].name+"")&&q(m,d),y&16&&b!==(b=E[4]("tokenPage.type")+"")&&q(S,b),y&18&&D!==(D=(E[1].type==="clinic"?E[4]("tokenPage.clinic"):E[4]("tokenPage.laboratory"))+"")&&q(L,D),y&16&&z!==(z=E[4]("tokenPage.feePaid")+"")&&q(G,z),y&2&&N!==(N=E[1].price+"")&&q(H,N),y&16&&J!==(J=E[4]("currency")+"")&&q(Q,J)},d(E){E&&u(n)}}}function ze(s){let n,i,l=s[4]("queue.positionInQueue")+"",a,o,r,_=s[1].queue.findIndex(s[10])+1+"",d,m,C=s[1].queue.length+"",P;return{c(){n=f("div"),i=f("p"),a=k(l),o=A(),r=f("p"),d=k(_),m=k(" / "),P=k(C),this.h()},l(x){n=p(x,"DIV",{class:!0});var b=h(n);i=p(b,"P",{class:!0});var S=h(i);a=g(S,l),S.forEach(u),o=w(b),r=p(b,"P",{class:!0});var t=h(r);d=g(t,_),m=g(t," / "),P=g(t,C),t.forEach(u),b.forEach(u),this.h()},h(){c(i,"class","queue-label svelte-p7b1x8"),c(r,"class","queue-number svelte-p7b1x8"),c(n,"class","queue-position svelte-p7b1x8")},m(x,b){xe(x,n,b),e(n,i),e(i,a),e(n,o),e(n,r),e(r,d),e(r,m),e(r,P)},p(x,b){b&16&&l!==(l=x[4]("queue.positionInQueue")+"")&&q(a,l),b&3&&_!==(_=x[1].queue.findIndex(x[10])+1+"")&&q(d,_),b&2&&C!==(C=x[1].queue.length+"")&&q(P,C)},d(x){x&&u(n)}}}function $e(s){let n,i,l,a,o,r,_="ðŸ¥",d,m,C=s[4]("hospital.title")+"",P,x,b,S=s[4]("tokenPage.subtitle")+"",t,O,D,L,W=s[4]("tokenPage.yourTokenNumber")+"",B,K,z,G,se,M,N,H,Z,J,Q,E,y,X,R,j,$,ee=s[4]("tokenPage.printToken")+"",ae,te,Y,ne,ie=s[4]("tokenPage.backToHome")+"",pe,ge,re,F,ue=s[4]("tokenPage.thankYouMessage")+"",fe,ke,de,me,ce=s[4]("hospital.title")+"",he,Pe,qe;document.title=n=s[4]("tokenPage.yourTokenNumber")+" #"+s[0]+" - "+s[4]("hospital.title");let I=s[1]&&Me(s),T=s[1]&&ze(s);return{c(){i=A(),l=f("div"),a=f("div"),o=f("div"),r=f("div"),r.textContent=_,d=A(),m=f("h1"),P=k(C),x=A(),b=f("p"),t=k(S),O=A(),D=f("div"),L=f("p"),B=k(W),K=A(),z=f("div"),G=k(s[0]),se=A(),I&&I.c(),M=A(),N=f("div"),H=f("p"),Z=k(s[2]),J=A(),Q=f("p"),E=k(s[3]),y=A(),T&&T.c(),X=A(),R=f("div"),j=f("button"),$=k("ðŸ–¨ï¸ "),ae=k(ee),te=A(),Y=f("button"),ne=k("ðŸ  "),pe=k(ie),ge=A(),re=f("div"),F=f("p"),fe=k(ue),ke=A(),de=f("br"),me=A(),he=k(ce),this.h()},l(v){Ye("svelte-1swwec3",document.head).forEach(u),i=w(v),l=p(v,"DIV",{class:!0});var Ce=h(l);a=p(Ce,"DIV",{class:!0});var V=h(a);o=p(V,"DIV",{class:!0});var le=h(o);r=p(le,"DIV",{class:!0,"data-svelte-h":!0}),Ke(r)!=="svelte-17r3utu"&&(r.textContent=_),d=w(le),m=p(le,"H1",{class:!0});var Ue=h(m);P=g(Ue,C),Ue.forEach(u),x=w(le),b=p(le,"P",{class:!0});var De=h(b);t=g(De,S),De.forEach(u),le.forEach(u),O=w(V),D=p(V,"DIV",{class:!0});var ve=h(D);L=p(ve,"P",{class:!0});var Ie=h(L);B=g(Ie,W),Ie.forEach(u),K=w(ve),z=p(ve,"DIV",{class:!0});var Te=h(z);G=g(Te,s[0]),Te.forEach(u),ve.forEach(u),se=w(V),I&&I.l(V),M=w(V),N=p(V,"DIV",{class:!0});var be=h(N);H=p(be,"P",{class:!0});var Se=h(H);Z=g(Se,s[2]),Se.forEach(u),J=w(be),Q=p(be,"P",{class:!0});var Ne=h(Q);E=g(Ne,s[3]),Ne.forEach(u),be.forEach(u),y=w(V),T&&T.l(V),X=w(V),R=p(V,"DIV",{class:!0});var _e=h(R);j=p(_e,"BUTTON",{class:!0});var we=h(j);$=g(we,"ðŸ–¨ï¸ "),ae=g(we,ee),we.forEach(u),te=w(_e),Y=p(_e,"BUTTON",{class:!0});var Ae=h(Y);ne=g(Ae,"ðŸ  "),pe=g(Ae,ie),Ae.forEach(u),_e.forEach(u),ge=w(V),re=p(V,"DIV",{class:!0});var Ve=h(re);F=p(Ve,"P",{class:!0});var oe=h(F);fe=g(oe,ue),ke=w(oe),de=p(oe,"BR",{class:!0}),me=w(oe),he=g(oe,ce),oe.forEach(u),Ve.forEach(u),V.forEach(u),Ce.forEach(u),this.h()},h(){c(r,"class","hospital-logo svelte-p7b1x8"),c(m,"class","svelte-p7b1x8"),c(b,"class","subtitle svelte-p7b1x8"),c(o,"class","print-header svelte-p7b1x8"),c(L,"class","label svelte-p7b1x8"),c(z,"class","token-number svelte-p7b1x8"),c(D,"class","token-number-section svelte-p7b1x8"),c(H,"class","date svelte-p7b1x8"),c(Q,"class","time svelte-p7b1x8"),c(N,"class","datetime-section svelte-p7b1x8"),c(j,"class","print-btn svelte-p7b1x8"),c(Y,"class","home-btn svelte-p7b1x8"),c(R,"class","actions svelte-p7b1x8"),c(de,"class","svelte-p7b1x8"),c(F,"class","footer-main svelte-p7b1x8"),c(re,"class","token-footer svelte-p7b1x8"),c(a,"class","token-card svelte-p7b1x8"),c(l,"class","container svelte-p7b1x8")},m(v,U){xe(v,i,U),xe(v,l,U),e(l,a),e(a,o),e(o,r),e(o,d),e(o,m),e(m,P),e(o,x),e(o,b),e(b,t),e(a,O),e(a,D),e(D,L),e(L,B),e(D,K),e(D,z),e(z,G),e(a,se),I&&I.m(a,null),e(a,M),e(a,N),e(N,H),e(H,Z),e(N,J),e(N,Q),e(Q,E),e(a,y),T&&T.m(a,null),e(a,X),e(a,R),e(R,j),e(j,$),e(j,ae),e(R,te),e(R,Y),e(Y,ne),e(Y,pe),e(a,ge),e(a,re),e(re,F),e(F,fe),e(F,ke),e(F,de),e(F,me),e(F,he),Pe||(qe=[Be(j,"click",s[5]),Be(Y,"click",s[6])],Pe=!0)},p(v,[U]){U&17&&n!==(n=v[4]("tokenPage.yourTokenNumber")+" #"+v[0]+" - "+v[4]("hospital.title"))&&(document.title=n),U&16&&C!==(C=v[4]("hospital.title")+"")&&q(P,C),U&16&&S!==(S=v[4]("tokenPage.subtitle")+"")&&q(t,S),U&16&&W!==(W=v[4]("tokenPage.yourTokenNumber")+"")&&q(B,W),U&1&&q(G,v[0]),v[1]?I?I.p(v,U):(I=Me(v),I.c(),I.m(a,M)):I&&(I.d(1),I=null),U&4&&q(Z,v[2]),U&8&&q(E,v[3]),v[1]?T?T.p(v,U):(T=ze(v),T.c(),T.m(a,X)):T&&(T.d(1),T=null),U&16&&ee!==(ee=v[4]("tokenPage.printToken")+"")&&q(ae,ee),U&16&&ie!==(ie=v[4]("tokenPage.backToHome")+"")&&q(pe,ie),U&16&&ue!==(ue=v[4]("tokenPage.thankYouMessage")+"")&&q(fe,ue),U&16&&ce!==(ce=v[4]("hospital.title")+"")&&q(he,ce)},i:Oe,o:Oe,d(v){v&&(u(i),u(l)),I&&I.d(),T&&T.d(),Pe=!1,He(qe)}}}function et(s,n,i){let l,a,o,r,_,d;Ee(s,Je,t=>i(4,r=t)),Ee(s,We,t=>i(8,_=t)),Ee(s,Fe,t=>i(9,d=t));let m="",C="";Qe(()=>{P();const t=setInterval(P,1e3);return()=>clearInterval(t)});function P(){const t=new Date;i(2,m=t.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})),i(3,C=t.toLocaleTimeString(void 0))}async function x(){if(typeof window>"u")return;const t=new ye;t.alignCenter(),t.size(17),t.text(r("hospital.title")),t.newline(),t.size(0),t.text(r("tokenPage.subtitle")),t.newline(2),t.text(r("tokenPage.yourTokenNumber")),t.newline(),t.size(34),t.text(l.toString()),t.newline(2),t.size(0),o&&(t.alignLeft(),t.text(`${r("tokenPage.section")}: ${o.name}`),t.newline(),t.text(`${r("tokenPage.type")}: ${o.type==="clinic"?r("tokenPage.clinic"):r("tokenPage.laboratory")}`),t.newline(),t.text(`${r("tokenPage.feePaid")}: ${o.price} ${r("currency")}`),t.newline(2)),t.alignCenter(),t.text(m),t.newline(),t.text(C),t.newline(2),t.printQRCode(l.toString(),6,"M"),t.newline(2),t.text(r("tokenPage.thankYouMessage")),t.newline(),t.text(r("hospital.title")),t.newline(4),t.cut();const O=t.encode();console.log("ESC/POS Data (Uint8Array):",O),console.log("ESC/POS Data (Base64):",Ze(O));try{window.print()}catch(D){console.error("Printing failed:",D)}}function b(){Ge("/")}const S=t=>t.number===l;return s.$$.update=()=>{s.$$.dirty&512&&i(0,l=parseInt(d.params.number)),s.$$.dirty&512&&i(7,a=parseInt(d.url.searchParams.get("section")||"0")),s.$$.dirty&384&&i(1,o=_.find(t=>t.id===a)),s.$$.dirty&3&&(o==null||o.queue.find(t=>t.number===l))},[l,o,m,C,r,x,b,a,_,d,S]}class it extends Re{constructor(n){super(),je(this,n,et,$e,Le,{})}}export{it as component,ot as universal};
