import{_ as z}from"./C1FmrZbK.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */var P;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(P||(P={}));class S extends Error{constructor(e,n,s){super(e),this.message=e,this.code=n,this.data=s}}const D=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},G=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},s=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:D(t),r=()=>i()!=="web",o=a=>{const l=p.get(a);return!!(l!=null&&l.platforms.has(i())||c(a))},c=a=>{var l;return(l=n.PluginHeaders)===null||l===void 0?void 0:l.find(E=>E.name===a)},u=a=>t.console.error(a),p=new Map,L=(a,l={})=>{const E=p.get(a);if(E)return console.warn(`Capacitor plugin "${a}" already registered. Cannot register plugins twice.`),E.proxy;const v=i(),x=c(a);let m;const M=async()=>(!m&&v in l?m=typeof l[v]=="function"?m=await l[v]():m=l[v]:e!==null&&!m&&"web"in l&&(m=typeof l.web=="function"?m=await l.web():m=l.web),m),q=(d,f)=>{var h,b;if(x){const y=x==null?void 0:x.methods.find(g=>f===g.name);if(y)return y.rtype==="promise"?g=>n.nativePromise(a,f.toString(),g):(g,T)=>n.nativeCallback(a,f.toString(),g,T);if(d)return(h=d[f])===null||h===void 0?void 0:h.bind(d)}else{if(d)return(b=d[f])===null||b===void 0?void 0:b.bind(d);throw new S(`"${a}" plugin is not implemented on ${v}`,P.Unimplemented)}},$=d=>{let f;const h=(...b)=>{const y=M().then(g=>{const T=q(g,d);if(T){const C=T(...b);return f=C==null?void 0:C.remove,C}else throw new S(`"${a}.${d}()" is not implemented on ${v}`,P.Unimplemented)});return d==="addListener"&&(y.remove=async()=>f()),y};return h.toString=()=>`${d.toString()}() { [capacitor code] }`,Object.defineProperty(h,"name",{value:d,writable:!1,configurable:!1}),h},R=$("addListener"),F=$("removeListener"),K=(d,f)=>{const h=R({eventName:d},f),b=async()=>{const g=await h;F({eventName:d,callbackId:g},f)},y=new Promise(g=>h.then(()=>g({remove:b})));return y.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await b()},y},k=new Proxy({},{get(d,f){switch(f){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return x?K:R;case"removeListener":return F;default:return $(f)}}});return s[a]=k,p.set(a,{name:a,proxy:k,platforms:new Set([...Object.keys(l),...x?[v]:[]])}),k};return n.convertFileSrc||(n.convertFileSrc=a=>a),n.getPlatform=i,n.handleError=u,n.isNativePlatform=r,n.isPluginAvailable=o,n.registerPlugin=L,n.Exception=S,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},V=t=>t.Capacitor=G(t),w=V(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),A=w.registerPlugin;class O{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(n);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),s&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,s){const i=this.listeners[e];if(!i){if(s){let r=this.retainedEventArguments[e];r||(r=[]),r.push(n),this.retainedEventArguments[e]=r}return}i.forEach(r=>r(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(e="not implemented"){return new w.Exception(e,P.Unimplemented)}unavailable(e="not available"){return new w.Exception(e,P.Unavailable)}async removeListener(e,n){const s=this.listeners[e];if(!s)return;const i=s.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(s=>{this.notifyListeners(e,s)}))}}const W=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),B=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Q extends O{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[i,r]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=B(i).trim(),r=B(r).trim(),n[i]=r}),n}async setCookie(e){try{const n=W(e.key),s=W(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${s||""}${i}; path=${r}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}A("CapacitorCookies",{web:()=>new Q});const J=async t=>new Promise((e,n)=>{const s=new FileReader;s.onload=()=>{const i=s.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},s.onerror=i=>n(i),s.readAsDataURL(t)}),N=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,r,o)=>(i[r]=t[e[o]],i),{})},Y=(t,e=!0)=>t?Object.entries(t).reduce((s,i)=>{const[r,o]=i;let c,u;return Array.isArray(o)?(u="",o.forEach(p=>{c=e?encodeURIComponent(p):p,u+=`${r}=${c}&`}),u.slice(0,-1)):(c=e?encodeURIComponent(o):o,u=`${r}=${c}`),`${s}&${u}`},"").substr(1):null,H=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=N(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[o,c]of Object.entries(t.data||{}))r.set(o,c);n.body=r.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const r=new FormData;if(t.data instanceof FormData)t.data.forEach((c,u)=>{r.append(u,c)});else for(const c of Object.keys(t.data))r.append(c,t.data[c]);n.body=r;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class X extends O{async request(e){const n=H(e,e.webFetchExtra),s=Y(e.params,e.shouldEncodeUrlParams),i=s?`${e.url}?${s}`:e.url,r=await fetch(i,n),o=r.headers.get("content-type")||"";let{responseType:c="text"}=r.ok?e:{};o.includes("application/json")&&(c="json");let u,p;switch(c){case"arraybuffer":case"blob":p=await r.blob(),u=await J(p);break;case"json":u=await r.json();break;case"document":case"text":default:u=await r.text()}const L={};return r.headers.forEach((a,l)=>{L[l]=a}),{data:u,headers:L,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}A("CapacitorHttp",{web:()=>new X});var j;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(j||(j={}));var _;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(_||(_={}));class Z extends O{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}A("SystemBars",{web:()=>new Z});const ee=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:w,CapacitorException:S,get ExceptionCode(){return P},get SystemBarType(){return _},get SystemBarsStyle(){return j},WebPlugin:O,buildRequestInit:H,registerPlugin:A},Symbol.toStringTag,{value:"Module"}));let U=null;async function I(){if(!U&&w.isNativePlatform&&w.isNativePlatform()){const{registerPlugin:t}=await z(async()=>{const{registerPlugin:e}=await Promise.resolve().then(()=>ee);return{registerPlugin:e}},void 0,import.meta.url);U=t("SunmiPrinter")}return U}async function te(){if(!w.isNativePlatform||!w.isNativePlatform())return!1;try{return(await(await I()).isAvailable()).available}catch(t){return console.error("Failed to check SUNMI availability:",t),!1}}async function ne(t={}){if(!w.isNativePlatform||!w.isNativePlatform())return console.log("Not on native platform, using browser print"),window.print&&window.print(),!1;try{const e=await I();return await e.printerInit(),await e.setAlignment({alignment:1}),await e.printTextWithFont({text:`AL RAQI UNIVERSITY
`,typeface:"",fontSize:30}),await e.printTextWithFont({text:`HOSPITAL
`,typeface:"",fontSize:30}),await e.printText({text:`================================
`}),await e.printTextWithFont({text:`QUEUE TOKEN

`,typeface:"",fontSize:24}),await e.printTextWithFont({text:(t.number||"")+`
`,typeface:"",fontSize:60}),await e.printText({text:`
================================
`}),await e.setAlignment({alignment:0}),await e.printText({text:`Section: ${t.section||"-"}
`}),await e.printText({text:`Type: ${t.type||"-"}
`}),await e.printText({text:`Fee Paid: ${t.fee||"-"}

`}),await e.printText({text:`Date: ${t.date||"-"}
`}),await e.printText({text:`Time: ${t.time||"-"}

`}),await e.printText({text:`Queue Position: ${t.position||"-"} / ${t.total||"-"}

`}),await e.printText({text:`================================
`}),await e.printText({text:`INSTRUCTIONS:
- Please wait for your number
- Keep this token with you
- Listen for announcements
- If you miss your turn, inform the reception

`}),await e.printText({text:`================================
     Thank you for choosing
   AL Raqi University Hospital

`}),await e.lineWrap({lines:3}),await e.cutPaper(),!0}catch(e){return console.error("SUNMI printer error:",e),window.print&&window.print(),!1}}async function re(){if(!w.isNativePlatform||!w.isNativePlatform())return{available:!1,platform:"web"};try{const t=await I(),e=await t.isAvailable(),n=await t.getPrinterStatus();return{available:e.available,status:n.status,platform:w.getPlatform()}}catch(t){return{available:!1,error:String(t),platform:w.getPlatform()}}}const se={isSunmiAvailable:te,printToken:ne,checkPrinterStatus:re};export{re as checkPrinterStatus,se as default,te as isSunmiAvailable,ne as printToken};
