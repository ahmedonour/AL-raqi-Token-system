import{s as ut,n as Ze,c as Ae,r as wt,o as gt,e as pt}from"./CBAgXpWv.js";import{S as dt,i as ft,d as h,a as re,b as o,q as _,c as g,e as P,g as S,h as p,j as T,u as ht,s as U,f as D,t as C,p as He,k as mt,l as yt,m as _t,o as Pt,r as Et,v as kt,w as Lt}from"./B5JCov3p.js";import{p as Ot}from"./DDENlSmy.js";import{s as Dt}from"./C1I1J8-N.js";import{g as Ct}from"./cTkJ8FG3.js";import{$ as qt}from"./BdT7tXd5.js";import{h as At}from"./j6nhZCV2.js";import{_ as It}from"./C1FmrZbK.js";const St=!1,un=Object.freeze(Object.defineProperty({__proto__:null,prerender:St},Symbol.toStringTag,{value:"Module"}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var we;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(we||(we={}));class Re extends Error{constructor(e,t,a){super(e),this.message=e,this.code=t,this.data=a}}const Tt=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},Ut=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},a=t.Plugins=t.Plugins||{},s=()=>e!==null?e.name:Tt(n),r=()=>s()!=="web",i=d=>{const f=c.get(d);return!!(f!=null&&f.platforms.has(s())||l(d))},l=d=>{var f;return(f=t.PluginHeaders)===null||f===void 0?void 0:f.find(E=>E.name===d)},u=d=>n.console.error(d),c=new Map,b=(d,f={})=>{const E=c.get(d);if(E)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),E.proxy;const m=s(),y=l(d);let O;const v=async()=>(!O&&m in f?O=typeof f[m]=="function"?O=await f[m]():O=f[m]:e!==null&&!O&&"web"in f&&(O=typeof f.web=="function"?O=await f.web():O=f.web),O),H=(I,L)=>{var q,B;if(y){const R=y==null?void 0:y.methods.find(N=>L===N.name);if(R)return R.rtype==="promise"?N=>t.nativePromise(d,L.toString(),N):(N,F)=>t.nativeCallback(d,L.toString(),N,F);if(I)return(q=I[L])===null||q===void 0?void 0:q.bind(I)}else{if(I)return(B=I[L])===null||B===void 0?void 0:B.bind(I);throw new Re(`"${d}" plugin is not implemented on ${m}`,we.Unimplemented)}},K=I=>{let L;const q=(...B)=>{const R=v().then(N=>{const F=H(N,I);if(F){const A=F(...B);return L=A==null?void 0:A.remove,A}else throw new Re(`"${d}.${I}()" is not implemented on ${m}`,we.Unimplemented)});return I==="addListener"&&(R.remove=async()=>L()),R};return q.toString=()=>`${I.toString()}() { [capacitor code] }`,Object.defineProperty(q,"name",{value:I,writable:!1,configurable:!1}),q},M=K("addListener"),J=K("removeListener"),Q=(I,L)=>{const q=M({eventName:I},L),B=async()=>{const N=await q;J({eventName:I,callbackId:N},L)},R=new Promise(N=>q.then(()=>N({remove:B})));return R.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await B()},R},X=new Proxy({},{get(I,L){switch(L){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?Q:M;case"removeListener":return J;default:return K(L)}}});return a[d]=X,c.set(d,{name:d,proxy:X,platforms:new Set([...Object.keys(f),...y?[m]:[]])}),X};return t.convertFileSrc||(t.convertFileSrc=d=>d),t.getPlatform=s,t.handleError=u,t.isNativePlatform=r,t.isPluginAvailable=i,t.registerPlugin=b,t.Exception=Re,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},Nt=n=>n.Capacitor=Ut(n),te=Nt(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ie=te.registerPlugin;class Me{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let a=!1;this.listeners[e]||(this.listeners[e]=[],a=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),a&&this.sendRetainedArgumentsForEvent(e);const i=async()=>this.removeListener(e,t);return Promise.resolve({remove:i})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,a){const s=this.listeners[e];if(!s){if(a){let r=this.retainedEventArguments[e];r||(r=[]),r.push(t),this.retainedEventArguments[e]=r}return}s.forEach(r=>r(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:a=>{this.notifyListeners(t,a)}}}unimplemented(e="not implemented"){return new te.Exception(e,we.Unimplemented)}unavailable(e="not available"){return new te.Exception(e,we.Unavailable)}async removeListener(e,t){const a=this.listeners[e];if(!a)return;const s=a.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(a=>{this.notifyListeners(e,a)}))}}const xe=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),et=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Bt extends Me{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(a=>{if(a.length<=0)return;let[s,r]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=et(s).trim(),r=et(r).trim(),t[s]=r}),t}async setCookie(e){try{const t=xe(e.key),a=xe(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),i=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${a||""}${s}; path=${r}; ${i};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Ie("CapacitorCookies",{web:()=>new Bt});const jt=async n=>new Promise((e,t)=>{const a=new FileReader;a.onload=()=>{const s=a.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},a.onerror=s=>t(s),a.readAsDataURL(n)}),Vt=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(s=>s.toLocaleLowerCase()).reduce((s,r,i)=>(s[r]=n[e[i]],s),{})},Rt=(n,e=!0)=>n?Object.entries(n).reduce((a,s)=>{const[r,i]=s;let l,u;return Array.isArray(i)?(u="",i.forEach(c=>{l=e?encodeURIComponent(c):c,u+=`${r}=${l}&`}),u.slice(0,-1)):(l=e?encodeURIComponent(i):i,u=`${r}=${l}`),`${a}&${u}`},"").substr(1):null,Wt=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),s=Vt(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(s.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[i,l]of Object.entries(n.data||{}))r.set(i,l);t.body=r.toString()}else if(s.includes("multipart/form-data")||n.data instanceof FormData){const r=new FormData;if(n.data instanceof FormData)n.data.forEach((l,u)=>{r.append(u,l)});else for(const l of Object.keys(n.data))r.append(l,n.data[l]);t.body=r;const i=new Headers(t.headers);i.delete("content-type"),t.headers=i}else(s.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class Ht extends Me{async request(e){const t=Wt(e,e.webFetchExtra),a=Rt(e.params,e.shouldEncodeUrlParams),s=a?`${e.url}?${a}`:e.url,r=await fetch(s,t),i=r.headers.get("content-type")||"";let{responseType:l="text"}=r.ok?e:{};i.includes("application/json")&&(l="json");let u,c;switch(l){case"arraybuffer":case"blob":c=await r.blob(),u=await jt(c);break;case"json":u=await r.json();break;case"document":case"text":default:u=await r.text()}const b={};return r.headers.forEach((d,f)=>{b[f]=d}),{data:u,headers:b,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Ie("CapacitorHttp",{web:()=>new Ht});var tt;(function(n){n.Dark="DARK",n.Light="LIGHT",n.Default="DEFAULT"})(tt||(tt={}));var nt;(function(n){n.StatusBar="StatusBar",n.NavigationBar="NavigationBar"})(nt||(nt={}));class Mt extends Me{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Ie("SystemBars",{web:()=>new Mt});var st;(function(n){n[n.SCAN_MODE_LOW_POWER=0]="SCAN_MODE_LOW_POWER",n[n.SCAN_MODE_BALANCED=1]="SCAN_MODE_BALANCED",n[n.SCAN_MODE_LOW_LATENCY=2]="SCAN_MODE_LOW_LATENCY"})(st||(st={}));var at;(function(n){n[n.CONNECTION_PRIORITY_BALANCED=0]="CONNECTION_PRIORITY_BALANCED",n[n.CONNECTION_PRIORITY_HIGH=1]="CONNECTION_PRIORITY_HIGH",n[n.CONNECTION_PRIORITY_LOW_POWER=2]="CONNECTION_PRIORITY_LOW_POWER"})(at||(at={}));function Ft(n){return new DataView(Uint8Array.from(n).buffer)}function Yt(n){return Array.from(new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}function zt(n){return`0000${n.toString(16).padStart(4,"0")}-0000-1000-8000-00805f9b34fb`}function vt(n){const e=[];let t,a,s=1,r=0;for(t=0;t<n.length;t++)a=n.charCodeAt(t),(a>47&&a<58||a>64&&a<71||a>96&&a<103)&&(r=r<<4^(a>64?a+9:a)&15,(s^=1)&&e.push(r&255));return Ft(e)}function ye(n){return Yt(n).map(e=>{let t=e.toString(16);return t.length==1&&(t="0"+t),t}).join("")}function dn(n){if(typeof n=="string")return n;if(typeof n=="number")return zt(n);throw new Error("Invalid UUID")}function fn(n){const e={};if(n)return n.forEach((t,a)=>{e[a.toString()]=t}),e}function rt(n){if(n!==void 0){if(typeof n=="string"){const e=vt(n);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return n instanceof DataView?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}}function qe(n){if(n!==void 0)return n instanceof DataView?ye(n):ye(new DataView(n.buffer,n.byteOffset,n.byteLength))}function hn(n){if(typeof SharedArrayBuffer<"u"&&n.buffer instanceof SharedArrayBuffer){const t=new Uint8Array(n.buffer,n.byteOffset,n.byteLength).slice().buffer;return new DataView(t)}return n}const w=Ie("BluetoothLe",{web:()=>It(()=>import("./Blv_InfK.js"),[],import.meta.url).then(n=>new n.BluetoothLeWeb)}),Gt=()=>{let n=Promise.resolve();return e=>new Promise((t,a)=>{n=n.then(()=>e()).then(t).catch(a)})};function We(n){return n?Gt():e=>e()}function V(n){if(typeof n!="string")throw new Error(`Invalid UUID type ${typeof n}. Expected string.`);if(n=n.toLowerCase(),!(n.search(/^[0-9a-f]{8}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{12}$/)>=0))throw new Error(`Invalid UUID format ${n}. Expected 128 bit string (e.g. "0000180d-0000-1000-8000-00805f9b34fb").`);return n}class $t{constructor(){this.scanListener=null,this.eventListeners=new Map,this.queue=We(!0)}enableQueue(){this.queue=We(!0)}disableQueue(){this.queue=We(!1)}async initialize(e){await this.queue(async()=>{await w.initialize(e)})}async isEnabled(){return await this.queue(async()=>(await w.isEnabled()).value)}async requestEnable(){await this.queue(async()=>{await w.requestEnable()})}async enable(){await this.queue(async()=>{await w.enable()})}async disable(){await this.queue(async()=>{await w.disable()})}async startEnabledNotifications(e){await this.queue(async()=>{var t;const a="onEnabledChanged";await((t=this.eventListeners.get(a))===null||t===void 0?void 0:t.remove());const s=await w.addListener(a,r=>{e(r.value)});this.eventListeners.set(a,s),await w.startEnabledNotifications()})}async stopEnabledNotifications(){await this.queue(async()=>{var e;const t="onEnabledChanged";await((e=this.eventListeners.get(t))===null||e===void 0?void 0:e.remove()),this.eventListeners.delete(t),await w.stopEnabledNotifications()})}async isLocationEnabled(){return await this.queue(async()=>(await w.isLocationEnabled()).value)}async openLocationSettings(){await this.queue(async()=>{await w.openLocationSettings()})}async openBluetoothSettings(){await this.queue(async()=>{await w.openBluetoothSettings()})}async openAppSettings(){await this.queue(async()=>{await w.openAppSettings()})}async setDisplayStrings(e){await this.queue(async()=>{await w.setDisplayStrings(e)})}async requestDevice(e){return e=e?this.validateRequestBleDeviceOptions(e):void 0,await this.queue(async()=>await w.requestDevice(e))}async requestLEScan(e,t){e=this.validateRequestBleDeviceOptions(e),await this.queue(async()=>{var a;await((a=this.scanListener)===null||a===void 0?void 0:a.remove()),this.scanListener=await w.addListener("onScanResult",s=>{const r=Object.assign(Object.assign({},s),{manufacturerData:this.convertObject(s.manufacturerData),serviceData:this.convertObject(s.serviceData),rawAdvertisement:s.rawAdvertisement?this.convertValue(s.rawAdvertisement):void 0});t(r)}),await w.requestLEScan(e)})}async stopLEScan(){await this.queue(async()=>{var e;await((e=this.scanListener)===null||e===void 0?void 0:e.remove()),this.scanListener=null,await w.stopLEScan()})}async getDevices(e){if(!Array.isArray(e))throw new Error("deviceIds must be an array");return this.queue(async()=>(await w.getDevices({deviceIds:e})).devices)}async getConnectedDevices(e){if(!Array.isArray(e))throw new Error("services must be an array");return e=e.map(V),this.queue(async()=>(await w.getConnectedDevices({services:e})).devices)}async getBondedDevices(){return this.queue(async()=>(await w.getBondedDevices()).devices)}async connect(e,t,a){await this.queue(async()=>{var s;if(t){const r=`disconnected|${e}`;await((s=this.eventListeners.get(r))===null||s===void 0?void 0:s.remove());const i=await w.addListener(r,()=>{t(e)});this.eventListeners.set(r,i)}await w.connect(Object.assign({deviceId:e},a))})}async createBond(e,t){await this.queue(async()=>{await w.createBond(Object.assign({deviceId:e},t))})}async isBonded(e){return await this.queue(async()=>(await w.isBonded({deviceId:e})).value)}async disconnect(e){await this.queue(async()=>{await w.disconnect({deviceId:e})})}async getServices(e){return await this.queue(async()=>(await w.getServices({deviceId:e})).services)}async discoverServices(e){await this.queue(async()=>{await w.discoverServices({deviceId:e})})}async getMtu(e){return await this.queue(async()=>(await w.getMtu({deviceId:e})).value)}async requestConnectionPriority(e,t){await this.queue(async()=>{await w.requestConnectionPriority({deviceId:e,connectionPriority:t})})}async readRssi(e){return await this.queue(async()=>{const a=await w.readRssi({deviceId:e});return parseFloat(a.value)})}async read(e,t,a,s){return t=V(t),a=V(a),await this.queue(async()=>{const i=await w.read(Object.assign({deviceId:e,service:t,characteristic:a},s));return this.convertValue(i.value)})}async write(e,t,a,s,r){return t=V(t),a=V(a),this.queue(async()=>{if(!(s!=null&&s.buffer))throw new Error("Invalid data.");let i=s;te.getPlatform()!=="web"&&(i=ye(s)),await w.write(Object.assign({deviceId:e,service:t,characteristic:a,value:i},r))})}async writeWithoutResponse(e,t,a,s,r){t=V(t),a=V(a),await this.queue(async()=>{if(!(s!=null&&s.buffer))throw new Error("Invalid data.");let i=s;te.getPlatform()!=="web"&&(i=ye(s)),await w.writeWithoutResponse(Object.assign({deviceId:e,service:t,characteristic:a,value:i},r))})}async readDescriptor(e,t,a,s,r){return t=V(t),a=V(a),s=V(s),await this.queue(async()=>{const l=await w.readDescriptor(Object.assign({deviceId:e,service:t,characteristic:a,descriptor:s},r));return this.convertValue(l.value)})}async writeDescriptor(e,t,a,s,r,i){return t=V(t),a=V(a),s=V(s),this.queue(async()=>{if(!(r!=null&&r.buffer))throw new Error("Invalid data.");let l=r;te.getPlatform()!=="web"&&(l=ye(r)),await w.writeDescriptor(Object.assign({deviceId:e,service:t,characteristic:a,descriptor:s,value:l},i))})}async startNotifications(e,t,a,s,r){t=V(t),a=V(a),await this.queue(async()=>{var i;const l=`notification|${e}|${t}|${a}`;await((i=this.eventListeners.get(l))===null||i===void 0?void 0:i.remove());const u=await w.addListener(l,c=>{s(this.convertValue(c==null?void 0:c.value))});this.eventListeners.set(l,u),await w.startNotifications(Object.assign({deviceId:e,service:t,characteristic:a},r))})}async stopNotifications(e,t,a){t=V(t),a=V(a),await this.queue(async()=>{var s;const r=`notification|${e}|${t}|${a}`;await((s=this.eventListeners.get(r))===null||s===void 0?void 0:s.remove()),this.eventListeners.delete(r),await w.stopNotifications({deviceId:e,service:t,characteristic:a})})}validateRequestBleDeviceOptions(e){return e=Object.assign({},e),e.services&&(e.services=e.services.map(V)),e.optionalServices&&(e.optionalServices=e.optionalServices.map(V)),e.serviceData&&te.getPlatform()!=="web"&&(e.serviceData=e.serviceData.map(t=>Object.assign(Object.assign({},t),{serviceUuid:V(t.serviceUuid),dataPrefix:qe(t.dataPrefix),mask:qe(t.mask)}))),e.manufacturerData&&(te.getPlatform()!=="web"?e.manufacturerData=e.manufacturerData.map(t=>Object.assign(Object.assign({},t),{dataPrefix:qe(t.dataPrefix),mask:qe(t.mask)})):e.manufacturerData=e.manufacturerData.map(t=>Object.assign(Object.assign({},t),{dataPrefix:rt(t.dataPrefix),mask:rt(t.mask)}))),e}convertValue(e){return typeof e=="string"?vt(e):e===void 0?new DataView(new ArrayBuffer(0)):e}convertObject(e){if(e===void 0)return;const t={};for(const a of Object.keys(e))t[a]=this.convertValue(e[a]);return t}}const be=new $t;function it(n){let e,t="Please grant permission to use the printer.";return{c(){e=p("p"),e.textContent=t,this.h()},l(a){e=g(a,"P",{class:!0,"data-svelte-h":!0}),ht(e)!=="svelte-1qoom6t"&&(e.textContent=t),this.h()},h(){_(e,"class","status svelte-1o7miz8")},m(a,s){re(a,e,s)},d(a){a&&h(e)}}}function Kt(n){let e,t,a=n[0].name+"",s;return{c(){e=p("p"),t=C("Connected to: "),s=C(a)},l(r){e=g(r,"P",{});var i=P(e);t=D(i,"Connected to: "),s=D(i,a),i.forEach(h)},m(r,i){re(r,e,i),o(e,t),o(e,s)},p(r,i){i&1&&a!==(a=r[0].name+"")&&U(s,a)},d(r){r&&h(e)}}}function Qt(n){let e,t=n[1]?"Connecting...":"Connect to Printer",a,s,r,i;return{c(){e=p("button"),a=C(t),this.h()},l(l){e=g(l,"BUTTON",{});var u=P(e);a=D(u,t),u.forEach(h),this.h()},h(){e.disabled=s=n[1]||!n[3]},m(l,u){re(l,e,u),o(e,a),r||(i=He(e,"click",n[4]),r=!0)},p(l,u){u&2&&t!==(t=l[1]?"Connecting...":"Connect to Printer")&&U(a,t),u&10&&s!==(s=l[1]||!l[3])&&(e.disabled=s)},d(l){l&&h(e),r=!1,i()}}}function ot(n){let e,t;return{c(){e=p("p"),t=C(n[2]),this.h()},l(a){e=g(a,"P",{class:!0});var s=P(e);t=D(s,n[2]),s.forEach(h),this.h()},h(){_(e,"class","status svelte-1o7miz8")},m(a,s){re(a,e,s),o(e,t)},p(a,s){s&4&&U(t,a[2])},d(a){a&&h(e)}}}function Jt(n){let e,t,a,s=!n[3]&&it();function r(c,b){return c[0]?Kt:Qt}let i=r(n),l=i(n),u=n[2]&&ot(n);return{c(){e=p("div"),s&&s.c(),t=T(),l.c(),a=T(),u&&u.c(),this.h()},l(c){e=g(c,"DIV",{class:!0});var b=P(e);s&&s.l(b),t=S(b),l.l(b),a=S(b),u&&u.l(b),b.forEach(h),this.h()},h(){_(e,"class","bluetooth-printer svelte-1o7miz8")},m(c,b){re(c,e,b),s&&s.m(e,null),o(e,t),l.m(e,null),o(e,a),u&&u.m(e,null)},p(c,[b]){c[3]?s&&(s.d(1),s=null):s||(s=it(),s.c(),s.m(e,t)),i===(i=r(c))&&l?l.p(c,b):(l.d(1),l=i(c),l&&(l.c(),l.m(e,a))),c[2]?u?u.p(c,b):(u=ot(c),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:Ze,o:Ze,d(c){c&&h(e),s&&s.d(),l.d(),u&&u.d()}}}function Xt(n,e,t){let a;Ae(n,At,m=>t(3,a=m));let s,r,i,l,u=!1,c="";async function b(){te.isNativePlatform()?await f():await d()}async function d(){if(!navigator.bluetooth){t(2,c="Web Bluetooth API is not available in this browser.");return}try{t(1,u=!0),t(2,c="Requesting Bluetooth device..."),t(0,s=await navigator.bluetooth.requestDevice({acceptAllDevices:!0})),t(2,c=`Connecting to ${s.name}...`);const m=await s.gatt.connect();t(2,c="Getting service...");const y=await m.getPrimaryServices();if(y.length>0){i=y[0].uuid;const O=y[0];t(2,c="Getting characteristic...");const v=await O.getCharacteristics();v.length>0?(l=v[0].uuid,t(2,c=`Connected to ${s.name}. Ready to print.`)):t(2,c="No characteristics found.")}else t(2,c="No services found.")}catch(m){t(2,c=`Error: ${m.message}`)}finally{t(1,u=!1)}}async function f(){try{if(t(1,u=!0),await be.initialize(),te.getPlatform()==="android"&&!await be.isLocationEnabled()){t(2,c="Please enable location services."),t(1,u=!1);return}t(2,c="Scanning for devices...");const m=await be.requestLEScan({},y=>{});if(m.device){t(0,s=m.device),r=s.deviceId,t(2,c=`Connecting to ${s.name||s.deviceId}...`),await be.connect(r),t(2,c="Discovering services...");const y=await be.getServices(r);y.length>0?(i=y[0].uuid,y[0].characteristics.length>0?(l=y[0].characteristics[0].uuid,t(2,c=`Connected to ${s.name}. Ready to print.`)):t(2,c="No characteristics found.")):t(2,c="No services found.")}else t(2,c="No device found.")}catch(m){t(2,c=`Error: ${m.message}`)}finally{t(1,u=!1)}}async function E(m){if(!i||!l){t(2,c="Not connected to a printer.");return}try{const O=new TextEncoder().encode(m+`


`);te.isNativePlatform()?await be.write(r,i,l,O.buffer):await(await(await(await s.gatt.connect()).getPrimaryService(i)).getCharacteristic(l)).writeValue(O),t(2,c="Print command sent.")}catch(y){t(2,c=`Print error: ${y.message}`)}}return[s,u,c,a,b,E]}class Zt extends dt{constructor(e){super(),ft(this,e,Xt,Jt,ut,{print:5})}get print(){return this.$$.ctx[5]}}function lt(n){let e,t,a,s=n[5]("tokenPage.section")+"",r,i,l,u=n[0].name+"",c,b,d,f,E=n[5]("tokenPage.type")+"",m,y,O,v=(n[0].type==="clinic"?n[5]("tokenPage.clinic"):n[5]("tokenPage.laboratory"))+"",H,K,M,J,Q=n[5]("tokenPage.feePaid")+"",X,I,L,q=n[0].price+"",B,R,N=n[5]("currency")+"",F;return{c(){e=p("div"),t=p("div"),a=p("span"),r=C(s),i=T(),l=p("span"),c=C(u),b=T(),d=p("div"),f=p("span"),m=C(E),y=T(),O=p("span"),H=C(v),K=T(),M=p("div"),J=p("span"),X=C(Q),I=T(),L=p("span"),B=C(q),R=T(),F=C(N),this.h()},l(A){e=g(A,"DIV",{class:!0});var j=P(e);t=g(j,"DIV",{class:!0});var se=P(t);a=g(se,"SPAN",{class:!0});var Z=P(a);r=D(Z,s),Z.forEach(h),i=S(se),l=g(se,"SPAN",{class:!0});var x=P(l);c=D(x,u),x.forEach(h),se.forEach(h),b=S(j),d=g(j,"DIV",{class:!0});var ie=P(d);f=g(ie,"SPAN",{class:!0});var oe=P(f);m=D(oe,E),oe.forEach(h),y=S(ie),O=g(ie,"SPAN",{class:!0});var ue=P(O);H=D(ue,v),ue.forEach(h),ie.forEach(h),K=S(j),M=g(j,"DIV",{class:!0});var le=P(M);J=g(le,"SPAN",{class:!0});var ee=P(J);X=D(ee,Q),ee.forEach(h),I=S(le),L=g(le,"SPAN",{class:!0});var ce=P(L);B=D(ce,q),R=S(ce),F=D(ce,N),ce.forEach(h),le.forEach(h),j.forEach(h),this.h()},h(){_(a,"class","info-label svelte-1n0r4ab"),_(l,"class","info-value svelte-1n0r4ab"),_(t,"class","info-row svelte-1n0r4ab"),_(f,"class","info-label svelte-1n0r4ab"),_(O,"class","info-value svelte-1n0r4ab"),_(d,"class","info-row svelte-1n0r4ab"),_(J,"class","info-label svelte-1n0r4ab"),_(L,"class","info-value svelte-1n0r4ab"),_(M,"class","info-row svelte-1n0r4ab"),_(e,"class","section-info svelte-1n0r4ab")},m(A,j){re(A,e,j),o(e,t),o(t,a),o(a,r),o(t,i),o(t,l),o(l,c),o(e,b),o(e,d),o(d,f),o(f,m),o(d,y),o(d,O),o(O,H),o(e,K),o(e,M),o(M,J),o(J,X),o(M,I),o(M,L),o(L,B),o(L,R),o(L,F)},p(A,j){j&32&&s!==(s=A[5]("tokenPage.section")+"")&&U(r,s),j&1&&u!==(u=A[0].name+"")&&U(c,u),j&32&&E!==(E=A[5]("tokenPage.type")+"")&&U(m,E),j&33&&v!==(v=(A[0].type==="clinic"?A[5]("tokenPage.clinic"):A[5]("tokenPage.laboratory"))+"")&&U(H,v),j&32&&Q!==(Q=A[5]("tokenPage.feePaid")+"")&&U(X,Q),j&1&&q!==(q=A[0].price+"")&&U(B,q),j&32&&N!==(N=A[5]("currency")+"")&&U(F,N)},d(A){A&&h(e)}}}function ct(n){let e,t,a=n[5]("queue.positionInQueue")+"",s,r,i,l=n[0].queue.findIndex(n[11])+1+"",u,c,b=n[0].queue.length+"",d;return{c(){e=p("div"),t=p("p"),s=C(a),r=T(),i=p("p"),u=C(l),c=C(" / "),d=C(b),this.h()},l(f){e=g(f,"DIV",{class:!0});var E=P(e);t=g(E,"P",{class:!0});var m=P(t);s=D(m,a),m.forEach(h),r=S(E),i=g(E,"P",{class:!0});var y=P(i);u=D(y,l),c=D(y," / "),d=D(y,b),y.forEach(h),E.forEach(h),this.h()},h(){_(t,"class","queue-label svelte-1n0r4ab"),_(i,"class","queue-number svelte-1n0r4ab"),_(e,"class","queue-position svelte-1n0r4ab")},m(f,E){re(f,e,E),o(e,t),o(t,s),o(e,r),o(e,i),o(i,u),o(i,c),o(i,d)},p(f,E){E&32&&a!==(a=f[5]("queue.positionInQueue")+"")&&U(s,a),E&3&&l!==(l=f[0].queue.findIndex(f[11])+1+"")&&U(u,l),E&1&&b!==(b=f[0].queue.length+"")&&U(d,b)},d(f){f&&h(e)}}}function xt(n){let e,t,a,s,r,i,l="ðŸ¥",u,c,b=n[5]("hospital.title")+"",d,f,E,m=n[5]("tokenPage.subtitle")+"",y,O,v,H,K=n[5]("tokenPage.yourTokenNumber")+"",M,J,Q,X,I,L,q,B,R,N,F,A,j,se,Z,x,ie,oe=n[5]("tokenPage.printToken")+"",ue,le,ee,ce,ge=n[5]("tokenPage.backToHome")+"",_e,Se,de,ae,Te,fe,ne,pe=n[5]("tokenPage.thankYouMessage")+"",Pe,Ue,Ee,Ne,me=n[5]("hospital.title")+"",ke,$,Be,Fe;document.title=e=n[5]("tokenPage.yourTokenNumber")+" #"+n[1]+" - "+n[5]("hospital.title");let Y=n[0]&&lt(n),z=n[0]&&ct(n),bt={};return ae=new Zt({props:bt}),n[12](ae),{c(){t=T(),a=p("div"),s=p("div"),r=p("div"),i=p("div"),i.textContent=l,u=T(),c=p("h1"),d=C(b),f=T(),E=p("p"),y=C(m),O=T(),v=p("div"),H=p("p"),M=C(K),J=T(),Q=p("div"),X=C(n[1]),I=T(),Y&&Y.c(),L=T(),q=p("div"),B=p("p"),R=C(n[2]),N=T(),F=p("p"),A=C(n[3]),j=T(),z&&z.c(),se=T(),Z=p("div"),x=p("button"),ie=C("ðŸ–¨ï¸ "),ue=C(oe),le=T(),ee=p("button"),ce=C("ðŸ  "),_e=C(ge),Se=T(),de=p("div"),Lt(ae.$$.fragment),Te=T(),fe=p("div"),ne=p("p"),Pe=C(pe),Ue=T(),Ee=p("br"),Ne=T(),ke=C(me),this.h()},l(k){Et("svelte-1swwec3",document.head).forEach(h),t=S(k),a=g(k,"DIV",{class:!0});var Le=P(a);s=g(Le,"DIV",{class:!0});var G=P(s);r=g(G,"DIV",{class:!0});var he=P(r);i=g(he,"DIV",{class:!0,"data-svelte-h":!0}),ht(i)!=="svelte-17r3utu"&&(i.textContent=l),u=S(he),c=g(he,"H1",{class:!0});var Ye=P(c);d=D(Ye,b),Ye.forEach(h),f=S(he),E=g(he,"P",{class:!0});var ze=P(E);y=D(ze,m),ze.forEach(h),he.forEach(h),O=S(G),v=g(G,"DIV",{class:!0});var Oe=P(v);H=g(Oe,"P",{class:!0});var Ge=P(H);M=D(Ge,K),Ge.forEach(h),J=S(Oe),Q=g(Oe,"DIV",{class:!0});var $e=P(Q);X=D($e,n[1]),$e.forEach(h),Oe.forEach(h),I=S(G),Y&&Y.l(G),L=S(G),q=g(G,"DIV",{class:!0});var De=P(q);B=g(De,"P",{class:!0});var Ke=P(B);R=D(Ke,n[2]),Ke.forEach(h),N=S(De),F=g(De,"P",{class:!0});var Qe=P(F);A=D(Qe,n[3]),Qe.forEach(h),De.forEach(h),j=S(G),z&&z.l(G),se=S(G),Z=g(G,"DIV",{class:!0});var Ce=P(Z);x=g(Ce,"BUTTON",{class:!0});var je=P(x);ie=D(je,"ðŸ–¨ï¸ "),ue=D(je,oe),je.forEach(h),le=S(Ce),ee=g(Ce,"BUTTON",{class:!0});var Ve=P(ee);ce=D(Ve,"ðŸ  "),_e=D(Ve,ge),Ve.forEach(h),Ce.forEach(h),Se=S(G),de=g(G,"DIV",{class:!0});var Je=P(de);kt(ae.$$.fragment,Je),Je.forEach(h),Te=S(G),fe=g(G,"DIV",{class:!0});var Xe=P(fe);ne=g(Xe,"P",{class:!0});var ve=P(ne);Pe=D(ve,pe),Ue=S(ve),Ee=g(ve,"BR",{class:!0}),Ne=S(ve),ke=D(ve,me),ve.forEach(h),Xe.forEach(h),G.forEach(h),Le.forEach(h),this.h()},h(){_(i,"class","hospital-logo svelte-1n0r4ab"),_(c,"class","svelte-1n0r4ab"),_(E,"class","subtitle svelte-1n0r4ab"),_(r,"class","print-header svelte-1n0r4ab"),_(H,"class","label svelte-1n0r4ab"),_(Q,"class","token-number svelte-1n0r4ab"),_(v,"class","token-number-section svelte-1n0r4ab"),_(B,"class","date svelte-1n0r4ab"),_(F,"class","time svelte-1n0r4ab"),_(q,"class","datetime-section svelte-1n0r4ab"),_(x,"class","print-btn svelte-1n0r4ab"),_(ee,"class","home-btn svelte-1n0r4ab"),_(Z,"class","actions no-print svelte-1n0r4ab"),_(de,"class","no-print svelte-1n0r4ab"),_(Ee,"class","svelte-1n0r4ab"),_(ne,"class","footer-main svelte-1n0r4ab"),_(fe,"class","token-footer svelte-1n0r4ab"),_(s,"class","token-card svelte-1n0r4ab"),_(a,"class","container svelte-1n0r4ab")},m(k,W){re(k,t,W),re(k,a,W),o(a,s),o(s,r),o(r,i),o(r,u),o(r,c),o(c,d),o(r,f),o(r,E),o(E,y),o(s,O),o(s,v),o(v,H),o(H,M),o(v,J),o(v,Q),o(Q,X),o(s,I),Y&&Y.m(s,null),o(s,L),o(s,q),o(q,B),o(B,R),o(q,N),o(q,F),o(F,A),o(s,j),z&&z.m(s,null),o(s,se),o(s,Z),o(Z,x),o(x,ie),o(x,ue),o(Z,le),o(Z,ee),o(ee,ce),o(ee,_e),o(s,Se),o(s,de),Pt(ae,de,null),o(s,Te),o(s,fe),o(fe,ne),o(ne,Pe),o(ne,Ue),o(ne,Ee),o(ne,Ne),o(ne,ke),$=!0,Be||(Fe=[He(x,"click",n[6]),He(ee,"click",n[7])],Be=!0)},p(k,[W]){(!$||W&34)&&e!==(e=k[5]("tokenPage.yourTokenNumber")+" #"+k[1]+" - "+k[5]("hospital.title"))&&(document.title=e),(!$||W&32)&&b!==(b=k[5]("hospital.title")+"")&&U(d,b),(!$||W&32)&&m!==(m=k[5]("tokenPage.subtitle")+"")&&U(y,m),(!$||W&32)&&K!==(K=k[5]("tokenPage.yourTokenNumber")+"")&&U(M,K),(!$||W&2)&&U(X,k[1]),k[0]?Y?Y.p(k,W):(Y=lt(k),Y.c(),Y.m(s,L)):Y&&(Y.d(1),Y=null),(!$||W&4)&&U(R,k[2]),(!$||W&8)&&U(A,k[3]),k[0]?z?z.p(k,W):(z=ct(k),z.c(),z.m(s,se)):z&&(z.d(1),z=null),(!$||W&32)&&oe!==(oe=k[5]("tokenPage.printToken")+"")&&U(ue,oe),(!$||W&32)&&ge!==(ge=k[5]("tokenPage.backToHome")+"")&&U(_e,ge);const Le={};ae.$set(Le),(!$||W&32)&&pe!==(pe=k[5]("tokenPage.thankYouMessage")+"")&&U(Pe,pe),(!$||W&32)&&me!==(me=k[5]("hospital.title")+"")&&U(ke,me)},i(k){$||(_t(ae.$$.fragment,k),$=!0)},o(k){yt(ae.$$.fragment,k),$=!1},d(k){k&&(h(t),h(a)),Y&&Y.d(),z&&z.d(),n[12](null),mt(ae),Be=!1,wt(Fe)}}}function en(n,e,t){let a,s,r,i,l,u;Ae(n,qt,v=>t(5,i=v)),Ae(n,Dt,v=>t(9,l=v)),Ae(n,Ot,v=>t(10,u=v));let c="",b="",d;gt(()=>{f();const v=setInterval(f,1e3);return()=>clearInterval(v)});function f(){const v=new Date;t(2,c=v.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})),t(3,b=v.toLocaleTimeString(void 0))}async function E(){if(!(typeof window>"u"))if(d&&d.print){const v=`
${i("hospital.title")}
${i("tokenPage.subtitle")}

${i("tokenPage.yourTokenNumber")}: ${a}

${i("tokenPage.section")}: ${r.name}
${i("tokenPage.type")}: ${r.type==="clinic"?i("tokenPage.clinic"):i("tokenPage.laboratory")}
${i("tokenPage.feePaid")}: ${r.price} ${i("currency")}

${c}
${b}

${i("queue.positionInQueue")}: ${r.queue.findIndex(H=>H.number===a)+1} / ${r.queue.length}

${i("tokenPage.thankYouMessage")}
			`;await d.print(v)}else window.print&&window.print()}function m(){Ct("/")}const y=v=>v.number===a;function O(v){pt[v?"unshift":"push"](()=>{d=v,t(4,d)})}return n.$$.update=()=>{n.$$.dirty&1024&&t(1,a=parseInt(u.params.number)),n.$$.dirty&1024&&t(8,s=parseInt(u.url.searchParams.get("section")||"0")),n.$$.dirty&768&&t(0,r=l.find(v=>v.id===s)),n.$$.dirty&3&&(r==null||r.queue.find(v=>v.number===a))},[r,a,c,b,d,i,E,m,s,l,u,y,O]}class vn extends dt{constructor(e){super(),ft(this,e,en,xt,ut,{})}}export{vn as P,Me as W,un as _,vt as h,fn as m,hn as t,dn as w};
